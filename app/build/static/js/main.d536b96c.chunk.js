(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{15:function(e,n,t){},17:function(e,n,t){},19:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),u=t(10),a=t.n(u),i=(t(15),t(3)),l=t(9),o=t(6),s=t.n(o),f=t(8),b=t(2),h=(t(17),[[-1,-2,-3,-4,-5,-6,-7],[-1,-2,-3,-4,-5,-6,-7]]),j=[[1,2,3,4,5,6,7],[-1,-2,-3,-4,-5,-6,-7]],d=[[-1,-2,-3,-4,-5,-6,-7],[1,2,3,4,5,6,7]],v=[[1,2,3,4,5,6,7],[1,2,3,4,5,6,7]],O=[[-1,-2,-3,-4,-5,-6,-7],[0,0,0,0,0,0,0]],p=[[1,2,3,4,5,6,7],[0,0,0,0,0,0,0]],m=[[0,0,0,0,0,0,0],[-1,-2,-3,-4,-5,-6,-7]],R=[[0,0,0,0,0,0,0],[1,2,3,4,5,6,7]],y={R:[O,p,m,R],Q:[O,p,m,R,h,j,d,v],B:[h,j,d,v],H:[[[2,2,-2,-2,1,-1,1,-1],[1,-1,1,-1,2,2,-2,-2]]],K:[[[1,0,-1,0,1,-1,1,-1],[0,-1,0,1,1,1,-1,-1]]]},g=function(e,n,t,r){return!(e<0||n<0||e>=t||n>=r)},P=function(e){for(var n=[],t=0;t<e;t++)n.push("");return n},x=P(16).map((function(e,n){return"P".concat(n+1)})),B=["R1","H1","B1","Q1","K1","B2","H2","R2"],k=["R3","H3","B3","Q2","K2","B4","H4","R4"],w=function(e,n,t,r,c){var u,a=[],l=Object(i.a)(e);try{for(l.s();!(u=l.n()).done;){var o=u.value;a.push(_(o,n,t,r,c))}}catch(s){l.e(s)}finally{l.f()}return a},W=function(e){return k.includes(e)?"B":B.includes(e)?"W":3===e.length||Number(e[1])>8?"B":"W"},_=function(e,n,t,r,c){for(var u=[],a=n[0].length,i=n.length,l=0;l<e[0].length;l++){var o=t+e[0][l],s=r+e[1][l];if(g(o,s,a,i)){if(0!==n[s][o].length){if(c===W(n[s][o])){if("H"===n[r][t][0]||"K"===n[r][t][0])continue;break}if(u.push([o,s]),"H"===n[r][t][0]||"K"===n[r][t][0])continue;break}u.push([o,s])}}return u},N=function(e,n){var t,r=Object(i.a)(n.entries());try{var c=function(){var r,c=Object(b.a)(t.value,2),u=c[0],a=c[1],l=Object(i.a)(a.entries());try{var o=function(){var t=Object(b.a)(r.value,2),c=t[0],a=t[1];if(0===a.length)return"continue";var i=W(a);return e!==i?"continue":I[a].finder(n,c,u).some((function(e){return e.some((function(e){var t=Object(b.a)(e,2),r=t[0],i=t[1],l=JSON.parse(JSON.stringify(n));return l[i][r]=a,l[u][c]="",E(l,a)}))}))?{v:{v:!0}}:void 0};for(l.s();!(r=l.n()).done;){var s=o();if("continue"!==s&&"object"===typeof s)return s.v}}catch(f){l.e(f)}finally{l.f()}};for(r.s();!(t=r.n()).done;){var u=c();if("object"===typeof u)return u.v}}catch(a){r.e(a)}finally{r.f()}return!1},E=function(e,n){var t=W(n),r=H(e,"W"===t?"B":"W"),c=function(e,n){var t,r=Object(i.a)(e.entries());try{for(r.s();!(t=r.n()).done;){var c,u=Object(b.a)(t.value,2),a=u[0],l=u[1],o=Object(i.a)(l.entries());try{for(o.s();!(c=o.n()).done;){var s=Object(b.a)(c.value,2),f=s[0];if(s[1]===n)return[a,f]}}catch(h){o.e(h)}finally{o.f()}}}catch(h){r.e(h)}finally{r.f()}return[-1,-1]}(e,"K".concat("W"===t?1:2)),u=Object(b.a)(c,2),a=u[0],l=u[1];return"X"!==r[a][l]},H=function(e,n){var t,r=e[0].length,c=e.length,u=P(c).map((function(e){return P(r)})),a=Object(i.a)(e.entries());try{for(a.s();!(t=a.n()).done;){var l,o=Object(b.a)(t.value,2),s=o[0],f=o[1],h=Object(i.a)(f.entries());try{for(h.s();!(l=h.n()).done;){var j=Object(b.a)(l.value,2),d=j[0],v=j[1];if(v.length>0&&W(v)===n){var O=void 0;if("P"===v[0]){var p="W"===n?-1:1;O=w([[[1,-1],[1*p,1*p]]],e,d,s,n)}else 0!==v.length&&(O=w(y[v[0]],e,d,s,n));if(void 0===O)continue;var m,R=Object(i.a)(O);try{for(R.s();!(m=R.n()).done;){m.value.forEach((function(e){return u[e[1]][e[0]]="X"}))}}catch(g){R.e(g)}finally{R.f()}}}}catch(g){h.e(g)}finally{h.f()}}}catch(g){a.e(g)}finally{a.f()}return u},K={coords:function(){var e={};return x.forEach((function(n,t){e[n]=t<=7?[t,1]:[t-8,6]})),B.forEach((function(n,t){e[n]=[t,0]})),k.forEach((function(n,t){e[n]=[t,7]})),e}(),white_castle_left:!1,white_castle_right:!1,black_castle_left:!1,black_castle_right:!1,finder:function(e,n,t){var r=e[0].length,c=e.length;if("R"===this.name[0])return w(y.R,e,n,t,this.side);if("B"===this.name[0])return w(y.B,e,n,t,this.side);if("H"===this.name[0])return w(y.H,e,n,t,this.side);if("K"===this.name[0])return w(y.K,e,n,t,this.side);if("Q"===this.name[0])return w(y.Q,e,n,t,this.side);if("P"===this.name[0]){var u=[],a=-1;if("B"===this.side&&(a+=2),!0===this.first_move&&g(n,t+2*a,r,c)&&0===e[t+2*a][n].length&&u.push([n,t+2*a]),g(n+1,t+1*a,r,c))if(0!==e[t+1*a][n+1].length)W(e[t+1*a][n+1])!==this.side&&u.push([n+1,t+1*a]);if(g(n-1,t+1*a,r,c))if(0!==e[t+1*a][n-1].length)W(e[t+1*a][n-1])!==this.side&&u.push([n-1,t+1*a]);return g(n,t+1*a,r,c)&&0===e[t+1*a][n].length&&u.push([n,t+1*a]),[u]}return null}};function C(e,n){var t=this;this.side=n,this.name=e,this.cur_coords=function(){return t.coords[t.name]},"P"===e[0]&&(this.first_move=!0)}C.prototype=K;var I={};B.forEach((function(e){I[e]=new C(e,"W")})),k.forEach((function(e){I[e]=new C(e,"B")})),x.forEach((function(e,n){I[e]=new C(e,"".concat(n<=7?"W":"B"))}));var M=t(1),X=function(e){var n=e.thisIsARef,t=e.name,c=e.pieceInfo,u=(Object(r.useRef)(!1),"".concat(c.side).concat(t[0]).toLowerCase());return Object(M.jsx)("div",{style:{backgroundImage:'url("'.concat(u,'.png")')},ref:n,onMouseMove:function(e){},className:"piece ".concat(t)})},L=function(e){var n=e.row,t=e.col,r=e.i,c=e.j,u=(e.piece,e.children);return Object(M.jsx)("td",{id:"".concat(n).concat(t),onMouseDown:function(e){e.loc=e.currentTarget.id,e.childPosX=e.currentTarget.getBoundingClientRect().left,e.childPosY=e.currentTarget.getBoundingClientRect().top},onMouseMove:function(e){},className:"".concat(r!==c?"oddCol":"evenCol"),children:u})},S=[];for(var Y in P(8).forEach((function(e){S.push(P(8))})),I){var Q=I[Y].cur_coords(),J=Object(b.a)(Q,2),T=J[0],A=J[1];S[7-A][T]=I[Y].name}var F=function(){var e=Object(f.a)(s.a.mark((function e(n,t,r,c){var u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E(t,n)){e.next=3;break}return e.abrupt("return",!1);case 3:if(N(W(n),t)){e.next=9;break}for(u in r(S),I)"P"===u[0]&&(I[u].first_move=!0);return c("W"),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(n,t,r,c){return e.apply(this,arguments)}}(),D=function(){var e=Object(r.useState)(S),n=Object(b.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)("W"),a=Object(b.a)(u,2),o=a[0],h=a[1],j={R1:Object(r.useRef)(null),H1:Object(r.useRef)(null),B1:Object(r.useRef)(null),Q1:Object(r.useRef)(null),K1:Object(r.useRef)(null),B2:Object(r.useRef)(null),H2:Object(r.useRef)(null),R2:Object(r.useRef)(null),R3:Object(r.useRef)(null),H3:Object(r.useRef)(null),B3:Object(r.useRef)(null),Q2:Object(r.useRef)(null),K2:Object(r.useRef)(null),B4:Object(r.useRef)(null),H4:Object(r.useRef)(null),R4:Object(r.useRef)(null),P1:Object(r.useRef)(null),P2:Object(r.useRef)(null),P3:Object(r.useRef)(null),P4:Object(r.useRef)(null),P5:Object(r.useRef)(null),P6:Object(r.useRef)(null),P7:Object(r.useRef)(null),P8:Object(r.useRef)(null),P9:Object(r.useRef)(null),P10:Object(r.useRef)(null),P11:Object(r.useRef)(null),P12:Object(r.useRef)(null),P13:Object(r.useRef)(null),P14:Object(r.useRef)(null),P15:Object(r.useRef)(null),P16:Object(r.useRef)(null)},d=Object(r.useRef)(null),v=Object(r.useRef)(!1);Object(r.useEffect)((function(){Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("K1",t,c,h);case 2:if(!e.sent){e.next=6;break}return alert("Checkmate.  Black wins."),e.abrupt("return");case 6:return e.next=8,F("K2",t,c,h);case 8:if(!e.sent){e.next=12;break}return alert("Checkmate.  White wins."),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})))()}));var O=[0,1,2,3,4,5,6,7];return Object(M.jsx)("div",{onMouseDown:function(e){var n=Array.from(e.target.classList);if(n.includes("piece")){var r=n[1];if(I[r].side===o){var c=j[r];if(null!==c.current){c.current.style.zIndex="100",c.current.style.transform="translateX(".concat(e.clientX-15-e.childPosX,"px) translateY(").concat(e.clientY-15-e.childPosY,"px)");var u=I[r].finder(t,Number(e.loc[0]),Number(e.loc[1])).reduce((function(e,n,t){return[].concat(Object(l.a)(e),Object(l.a)(n.map((function(e){return e.join("")}))))}),[]);v.current=!0,d.current={x:e.childPosX,y:e.childPosY,loc:e.loc,name:Array.from(e.target.classList)[1],dropLoc:u};var a,s=Object(i.a)(u);try{for(s.s();!(a=s.n()).done;){var f=a.value,b=document.getElementById(f);null!==b&&b.classList.add("selCol")}}catch(h){s.e(h)}finally{s.f()}}}}},onMouseUp:function(e){if(!1!==v.current&&null!==d.current){var n=d.current,r=n.name,u=n.dropLoc,a=n.loc,l=j[r],o=null;Array.from(document.elementsFromPoint(e.clientX,e.clientY)).forEach((function(e){null===o&&"TD"===e.nodeName&&(o=e)}));e:if(null!==o&&u.includes(o.id)){var s=Number(o.id[1]),f=Number(o.id[0]),b=JSON.parse(JSON.stringify(t)),O=E(t,r);b[a[1]][a[0]]="",b[s][f]=r;var p=E(b,r);if(!O&&!p){alert("you're in check");break e}if(!p)break e;if("K"===t[s][f][0]){"1"===t[s][f][1]?alert("White wins"):alert("Black wins"),c(S),h("W");break e}"P"===r[0]&&"first_move"in I[r]&&(I[r].first_move=!1),c(b),h((function(e){return"W"===e?"B":"W"}))}null!==l.current&&(l.current.style.zIndex="10",l.current.style.transform="");var m,R=Object(i.a)(u);try{for(R.s();!(m=R.n()).done;){var y=m.value,g=document.getElementById(y);null!==g&&g.classList.remove("selCol")}}catch(P){R.e(P)}finally{R.f()}v.current=!1,d.current=null}},onMouseMove:function(e){if(!1!==v.current&&null!==d.current){var n=d.current,t=n.name,r=(n.loc,n.x),c=n.y,u=j[t];null!==u.current&&(u.current.style.transform="translateX(".concat(e.clientX-15-r,"px) translateY(").concat(e.clientY-15-c,"px)"))}},className:"board",children:Object(M.jsx)("table",{children:Object(M.jsx)("tbody",{children:O.map((function(e){return Object(M.jsx)("tr",{children:O.map((function(n){var r=null;return""!==t[e][n]&&(r=Object(M.jsx)(X,{pieceInfo:I[t[e][n]],name:"".concat(t[e][n]),thisIsARef:j["".concat(t[e][n])]})),Object(M.jsx)(L,{row:n,col:e,piece:0===e&&0===n,i:e%2===1,j:n%2===0,children:r})}))})}))})})})},z=function(){return Object(M.jsx)("div",{className:"wrapper",children:Object(M.jsx)(D,{})})},U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,20)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,u=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),u(e),a(e)}))};a.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(z,{})}),document.getElementById("root")),U()}},[[19,1,2]]]);
//# sourceMappingURL=main.d536b96c.chunk.js.map